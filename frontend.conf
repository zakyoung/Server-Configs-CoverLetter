<VirtualHost *:80>
    ServerName coveredletter.com
    ServerAlias www.coveredletter.com
    DocumentRoot /var/www/CoverLetterV2/dist

    <Directory /var/www/CoverLetterV2/dist>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
        FallbackResource /index.html
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
    RewriteEngine on
    RewriteCond %{HTTPS} off
    RewriteCond %{HTTP_HOST} ^(www\.)?coveredletter\.com$ [NC]
    RewriteRule ^/?(.*) https://%{HTTP_HOST}/$1 [R=301,L]
RewriteCond %{SERVER_NAME} =www.coveredletter.com [OR]
RewriteCond %{SERVER_NAME} =coveredletter.com
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>
