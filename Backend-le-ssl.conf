<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerName www.api.coveredletter.com
    ServerAlias api.coveredletter.com
    WSGIDaemonProcess Backend python-home=/var/www/Backend/venv python-path=/var/www/Backend
    WSGIProcessGroup Backend
    WSGIScriptAlias / /var/www/Backend/wsgi.py
    LogLevel wsgi:debug
    <Directory /var/www/Backend>
        Require all granted
        Header set Access-Control-Allow-Origin "https://www.coveredletter.com"
        Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
        Header set Access-Control-Allow-Headers "Content-Type"
        Header set Access-Control-Allow-Credentials "true"
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/backend_error.log
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{Origin}i\"" combined_with_origin
    CustomLog ${APACHE_LOG_DIR}/backend_access.log combined_with_origin
    LogLevel wsgi:debug
    RewriteEngine on
# Some rewrite rules in this file were disabled on your HTTPS site,
# because they have the potential to create redirection loops.

#     RewriteCond %{SERVER_NAME} =api.coveredletter.com
#     RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]

SSLCertificateFile /etc/letsencrypt/live/api.coveredletter.com/fullchain.pem
SSLCertificateKeyFile /etc/letsencrypt/live/api.coveredletter.com/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
</IfModule>
